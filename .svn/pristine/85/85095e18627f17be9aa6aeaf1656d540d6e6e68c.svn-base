package com.leixiaohua1020.sffmpegandroidtranscoder;

import android.content.Context; 
import android.graphics.drawable.ColorDrawable; 
import android.view.LayoutInflater; 
import android.view.MotionEvent; 
import android.view.View; 
import android.widget.Button; 
import android.widget.PopupWindow; 

public class PopMenu extends PopupWindow  { 
  
  
  private View view; 
  private Button btn_zengyi,btn_tiaojiao,btn_moshi,btn_shipin,btn_tupianku,btn_shipinku,btn_guangzijishu,btn_wenjianguanli;
  
//  private Button btn_take_photo, btn_pick_photo, btn_cancel; 
  
  
  public PopMenu(Context mContext, View.OnClickListener itemsOnClick) { 
  
    this.view = LayoutInflater.from(mContext).inflate(R.layout.popmenu1, null); 
    /*button*/
    btn_zengyi = (Button) view.findViewById(R.id.pop_zengyi);
    btn_tiaojiao = (Button) view.findViewById(R.id.pop_tiaojiao); 
    btn_moshi = (Button) view.findViewById(R.id.pop_moshi); 
    btn_shipin = (Button) view.findViewById(R.id.pop_shipin); 
    btn_tupianku = (Button) view.findViewById(R.id.pop_tupianku); 
    btn_shipinku=(Button) view.findViewById(R.id.pop_shipinku); 
    btn_guangzijishu=(Button) view.findViewById(R.id.pop_guangzijishu); 
    btn_wenjianguanli=(Button) view.findViewById(R.id.pop_wenjianguanli); 
    // è®¾ç½®æŒ‰é’®ç›‘å¬ 
    btn_zengyi.setOnClickListener(itemsOnClick); 	
    btn_tiaojiao.setOnClickListener(itemsOnClick); 	
    btn_moshi.setOnClickListener(itemsOnClick); 	
    btn_shipin.setOnClickListener(itemsOnClick); 	
    btn_tupianku.setOnClickListener(itemsOnClick); 	
    btn_shipinku.setOnClickListener(itemsOnClick); 	
    btn_guangzijishu.setOnClickListener(itemsOnClick); 
    btn_wenjianguanli.setOnClickListener(itemsOnClick); 
    // è®¾ç½®å¤–éƒ¨å¯ç‚¹å‡? 
    this.setOutsideTouchable(true); 
    // mMenuViewæ·»åŠ OnTouchListenerç›‘å¬åˆ¤æ–­è·å–è§¦å±ä½ç½®å¦‚æœåœ¨é?‰æ‹©æ¡†å¤–é¢åˆ™é”?æ¯å¼¹å‡ºæ¡† 
    this.view.setOnTouchListener(new View.OnTouchListener() { 
  
      public boolean onTouch(View v, MotionEvent event) { 
  
        int height = view.findViewById(R.id.popwindow_layout).getTop(); 
  
        int y = (int) event.getY(); 
        if (event.getAction() == MotionEvent.ACTION_UP) { 
          if (y < height) { 
            dismiss(); 
          } 
        } 
        return true; 
      } 
    }); 
  
  
    /* è®¾ç½®å¼¹å‡ºçª—å£ç‰¹å¾ */
    // è®¾ç½®è§†å›¾ 
    this.setContentView(this.view); 
    // è®¾ç½®å¼¹å‡ºçª—ä½“çš„å®½å’Œé«˜ 
   this.setHeight(200); 
    this.setWidth(100); 
  
    // è®¾ç½®å¼¹å‡ºçª—ä½“å¯ç‚¹å‡? 
    this.setFocusable(true); 
  
    // å®ä¾‹åŒ–ä¸€ä¸ªColorDrawableé¢œè‰²ä¸ºåŠé€æ˜ 
    ColorDrawable dw = new ColorDrawable(0xb0000000); 
    // è®¾ç½®å¼¹å‡ºçª—ä½“çš„èƒŒæ™? 
    this.setBackgroundDrawable(dw); 
    // è®¾ç½®å¼¹å‡ºçª—ä½“æ˜¾ç¤ºæ—¶çš„åŠ¨ç”»ï¼Œä»åº•éƒ¨å‘ä¸Šå¼¹å‡º 
    this.setAnimationStyle(R.style.PopMenu_anim); 
  
  } 
} 